const shaderWebBackground={};(()=>{'use strict';function p(a,c){if(!a)throw new shaderWebBackground.ConfigError(c);}function r(a){p(a instanceof HTMLCanvasElement,"config.canvas must be instance of canvas");return a}function v(){const a=document.createElement("canvas"),c=a.style;c.width="100vw";c.height="100vh";c.position="fixed";c.top="0";c.left="0";c.zIndex=-9999;document.body.appendChild(a);return a}function w(a){a.width=a.clientWidth;a.height=a.clientHeight}
function y(a,c,b){const d=new z(a,e=>new shaderWebBackground.GlError(e));let f=0,k=0,t=0;const G={R:(e,g)=>e.uniform2f(g,a.width,a.height),T:(e,g)=>e.uniform1f(g,k),F:(e,g)=>e.uniform1i(g,f),D:(e,g)=>e.uniform1f(g,t)},u=Object.keys(c),H=u.length-1,q=u.map((e,g)=>{{var h=c[e];var l=d.a;var m=A(d,e,l.VERTEX_SHADER,"attribute vec2 V;void main(){gl_Position=vec4(V,0,1);}");h=A(d,e,l.FRAGMENT_SHADER,h);const n=l.createProgram();l.attachShader(n,m);l.attachShader(n,h);l.linkProgram(n);l=n}m=Object.assign(G,
b[e]&&b[e].uniforms);g<H?(g=new B(d.a,d.f),d.b.buffers[e]=g,e=new C(d.a,e,l,m,d.b,g)):e=new D(d.a,e,l,m,d.b);return e});a.width=0;a.height=0;const x=()=>{k=performance.now()/1E3;if(a.width!==a.clientWidth||a.height!==a.clientHeight)w(a),d.a.viewport(0,0,d.c.width,d.c.height),t=Math.min(a.width,a.height),f=0,q.forEach(e=>e.c(a.width,a.height));q.forEach(e=>{e.b(()=>{{var g=e.j;const h=d.a;h.bindBuffer(h.ARRAY_BUFFER,d.h);h.enableVertexAttribArray(g);h.vertexAttribPointer(g,2,h.FLOAT,!1,0,0);h.drawArrays(h.TRIANGLE_STRIP,
0,4);h.disableVertexAttribArray(g);h.bindBuffer(h.ARRAY_BUFFER,null)}})});f++;q.forEach(e=>e.g());requestAnimationFrame(x)};x()}
function E(a){a=a||{};const c=a.canvas?r(a.canvas):v();var b=document.head.querySelectorAll("script[type='x-shader/x-fragment']");p(0<b.length,'At least one <script type="x-shader/x-fragment"> required in document head');b.forEach(d=>p(d.id,"Each shader <script> needs unique id attribute"));b=Array.from(b).reduce((d,f)=>{d[f.id]=f.text.trim();return d},{});try{y(c,b,a.shaders||{})}catch(d){if(a.fallback)console.log("Could not load shaders, adding fallback class to canvas"+d),c.classList.add("fallback");
else throw d;}}shaderWebBackground.ConfigError=class extends Error{constructor(a){super(a);this.name="shaderWebBackground.GlConfigError"}};shaderWebBackground.GlError=class extends Error{constructor(a){super(a);this.name="shaderWebBackground.GlError"}};shaderWebBackground.shade=E;shaderWebBackground.shadeOnLoad=function(a){window.addEventListener("load",()=>E(a))};const F=[-1,1,1,1,-1,-1,1,-1];function I(a,c){return a.f(a.a.getExtension(c),c+" extension is not supported")}class J{constructor(a,c){this.a=a;this.f=c}b(){}}class K extends J{constructor(a,c){super(a,c);this.c=I(this,"OES_texture_half_float");I(this,"OES_texture_half_float_linear")}b(a,c){const b=this.a;b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a,c,0,b.RGBA,this.c.HALF_FLOAT_OES,null)}}
class L extends J{constructor(a,c){super(a,c);I(this,"EXT_color_buffer_float")}b(a,c){const b=this.a;b.texImage2D(b.TEXTURE_2D,0,b.RGBA16F,a,c,0,b.RGBA,b.FLOAT,null)}}function A(a,c,b,d){const f=a.a;b=f.createShader(b);f.shaderSource(b,d);f.compileShader(b);if(!f.getShaderParameter(b,f.COMPILE_STATUS)){const k=String(f.getShaderInfoLog(b));f.deleteShader(b);c="Cannot compile shader - "+c+": "+k;console.log(c+"\n"+d);throw a.g(c);}return b}
class z{constructor(a,c){var b={antialias:!1,depth:!1,alpha:!1};this.c=a;this.g=c;var d=(f,k)=>{if(!f)throw c(k);return f};this.a=a=d(a.getContext("webgl",b)||a.getContext("webgl",b),"webgl context not supported on supplied canvas element: "+a);this.f=a instanceof WebGL2RenderingContext?new L(a,d):new K(a,d);d=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,d);a.bufferData(a.ARRAY_BUFFER,new Float32Array(F),a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,null);this.h=d;this.b={buffers:{}}}}
class D{constructor(a,c,b,d,f){this.f=a;this.id=c;this.i=b;this.uniforms={};for(const k in d)(c=this.f.getUniformLocation(b,k))&&(this.uniforms[k]={location:c,l:d[k]});this.j=a.getAttribLocation(b,"V");this.h=f}c(){}b(a){const c=this.f;c.useProgram(this.i);for(const b in this.uniforms){const d=this.uniforms[b];d.l(c,d.location,this.h)}a();for(a=0;4>a;a++)c.activeTexture(c.TEXTURE0+a),c.bindTexture(c.TEXTURE_2D,null)}g(){}}
class C extends D{constructor(a,c,b,d,f,k){super(a,c,b,d,f);this.a=k}c(a,c){super.c(a,c);var b=this.a;b.in&&b.a.deleteTexture(b.in);b.out&&b.a.deleteTexture(b.out);b.in=M(b,a,c);b.out=M(b,a,c)}b(a){super.b(()=>{{var c=this.a;const b=c.a;b.bindFramebuffer(b.FRAMEBUFFER,c.c);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c.out);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c.out,0);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,null);a();b.bindTexture(b.TEXTURE_2D,
null);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);b.bindFramebuffer(b.FRAMEBUFFER,null)}})}g(){{var a=this.a;const c=a.out;a.out=a.in;a.in=c}}}
function M(a,c,b){const d=a.a,f=d.createTexture();d.bindTexture(d.TEXTURE_2D,f);a.b.b(c,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.bindTexture(d.TEXTURE_2D,null);return f}class B{constructor(a,c){this.c=a.createFramebuffer();this.a=a;this.b=c;this.out=this.in=null}};})()
//# sourceMappingURL=shader-web-background.min.js.map
